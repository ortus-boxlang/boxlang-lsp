plugins {
    id 'java'
    id "com.diffplug.spotless" version "6.25.0"
    id "com.github.harbby.gradle.serviceloader" version "1.1.8"
	id 'com.github.johnrengelman.shadow' version '8.1.1'
}

group = 'com.ortussolutions'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    compileOnly files('src/test/resources/libs/boxlang-1.0.0-all.jar')

    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation "org.junit.jupiter:junit-jupiter:5.+"
}

serviceLoader {
    serviceInterface 'ortus.boxlang.runtime.bifs.BIF'
    serviceInterface 'ortus.boxlang.runtime.components.Component'
    serviceInterface 'ortus.boxlang.runtime.async.tasks.IScheduler'
    serviceInterface 'ortus.boxlang.runtime.cache.providers.ICacheProvider'
}

shadowJar {
	manifest {
		attributes 'Description': 'ExampleBoxLangModule'
	}
    destinationDirectory = file("$rootDir/libs")
}

clean {
    delete files('libs')
}

test {
    useJUnitPlatform()
}
